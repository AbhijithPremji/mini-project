<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Payment Page</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        body {
            background-color: #f8f9fa; /* Light gray background */
        }
        .container {
            max-width: 960px; /* Limit page width for larger screens */
        }
        .card {
            border: none;
        }
        /* Style to hide payment details by default */
        .payment-details {
            display: none;
        }
        /* Media query for smaller headings */
        @media (max-width: 576px) {
            .checkout-heading {
                font-size: 1.75rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <div class="container my-5">
        
        <div id="alertPlaceholder"></div>

        <form id="paymentForm" method="POST" action="{% url 'Checkout' %}">
            {% csrf_token %} <div class="row g-4">
                <div class="col-12 text-center">
                    <h2 class="checkout-heading">Complete Your Payment</h2>
                </div>

                <div class="col-md-5 col-lg-4 order-md-last">
                    <div class="card shadow-sm">
                        <div class="card-header bg-primary text-white">
                            <h4 class="d-flex justify-content-between align-items-center ">
                                <span>Order Summary</span>
                            </h4>
                        </div>
                        <div class="card-body">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between lh-sm">
                                    <div>
                                        <h6 class="my-0">Customer Name</h6>
                                    </div>
                                    <span class="text-muted">{{add.Name}}</span>
                                </li>
                                <li class="list-group-item lh-sm">
                                    <div>
                                        <h6 class="my-0">Shipping Address</h6>
                                        <small class="text-muted">
                                            {{add.Address}}
                                            Pin Code: {{add.Pin}} <br>
                                            Phone: {{add.Phone}}
                                        </small>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between bg-light">
                                    <h5 class="my-0">Grand Total</h5>
                                    <strong>${{total}}</strong>
                                </li>
                            </ul>

                            <input type="hidden" name="customer_name" value="Jane M. Doe">
                            <input type="hidden" name="shipping_address" value="123 Example Street, Apt 4B, New York, NY 10001">
                            <input type="hidden" name="grand_total" value="142.50">

                        </div>
                    </div>
                </div>

                <div class="col-md-7 col-lg-8">
                    <div class="card shadow-sm">
                        <div class="card-header">
                            <h4 class="mb-0">Select Payment Method</h4>
                        </div>
                        <div class="card-body">
                            
                            <div class="form-check">
                                <input id="payCard" name="payment_method" type="radio" value="CARD" class="form-check-input" checked required>
                                <label class="form-check-label" for="payCard">
                                    <strong><i class="bi-credit-card-fill me-2"></i> Credit/Debit Card</strong>
                                </label>
                            </div>

                            <div id="cardDetails" class="payment-details" style="display: block;">
                                <div class="row g-3 mt-2">
                                    <div class="col-12">
                                        <label for="cc-name" class="form-label">Name on card</label>
                                        <input type="text" class="form-control" id="cc-name" name="cc_name" placeholder="John M. Doe">
                                    </div>
                                    <div class="col-12">
                                        <label for="cc-number" class="form-label">Card number</label>
                                        <input type="text" class="form-control" id="cc-number" name="cc_number" placeholder="1111-2222-3333-4444">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="cc-expiration" class="form-label">Expiration (MM/YY)</label>
                                        <input type="text" class="form-control" id="cc-expiration" name="cc_expiration" placeholder="MM/YY">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="cc-cvv" class="form-label">CVV</label>
                                        <input type="text" class="form-control" id="cc-cvv" name="cc_cvv" placeholder="123">
                                    </div>
                                </div>
                            </div>

                            <hr class="my-4">

                            <div class="form-check">
                                <input id="payUpi" name="payment_method" type="radio" value="UPI" class="form-check-input" required>
                                <label class="form-check-label" for="payUpi">
                                    <strong><i class="bi-phone-fill me-2"></i> UPI (Paytm, Google Pay, etc.)</strong>
                                </label>
                            </div>

                            <div id="upiDetails" class="payment-details">
                                <div class="mt-2">
                                    <label for="upi-id" class="form-label">Enter your UPI ID</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="upi-id" name="upi_id" placeholder="yourname@bank">
                                        <button class="btn btn-outline-primary" type="button">Verify</button>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-4">

                            <div class="form-check">
                                <input id="payCod" name="payment_method" type="radio" value="COD" class="form-check-input" required>
                                <label class="form-check-label" for="payCod">
                                    <strong><i class="bi-cash-coin me-2"></i> Cash on Delivery (COD)</strong>
                                </label>
                            </div>
                            
                            <div id="codDetails" class="payment-details">
                                <p class="text-muted mt-2">You can pay in cash to the delivery agent upon receiving your order.</p>
                            </div>

                        </div>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button class="btn btn-success btn-lg" type="submit" id="placeOrderBtn">
                            Place Order
                        </button>
                    </div>
                </div>
            </div>
        </form> </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            
            // --- Script for toggling payment details ---
            const paymentRadios = document.querySelectorAll('input[name="payment_method"]');
            const paymentDetails = document.querySelectorAll('.payment-details');

            paymentRadios.forEach(radio => {
                radio.addEventListener('change', () => {
                    // Hide all detail sections
                    paymentDetails.forEach(detail => {
                        detail.style.display = 'none';
                    });
                    
                    // Show the selected one
                    if (radio.id === 'payCard') {
                        document.getElementById('cardDetails').style.display = 'block';
                    } else if (radio.id === 'payUpi') {
                        document.getElementById('upiDetails').style.display = 'block';
                    } else if (radio.id === 'payCod') {
                        document.getElementById('codDetails').style.display = 'block';
                    }
                });
            });


            // --- Script for fake success alert ---
            const paymentForm = document.getElementById('paymentForm');
            const alertPlaceholder = document.getElementById('alertPlaceholder');

            const appendAlert = (message, type) => {
                const wrapper = document.createElement('div');
                wrapper.innerHTML = [
                    `<div class="alert alert-${type} alert-dismissible" role="alert">`,
                    `   <div>${message}</div>`,
                    '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
                    '</div>'
                ].join('');
                alertPlaceholder.innerHTML = ''; // Clear old alerts
                alertPlaceholder.append(wrapper);
            }

            // Listen for the form 'submit' event
            if (paymentForm) {
                paymentForm.addEventListener('submit', (event) => {
                    // 1. Stop the form from actually submitting (for this demo)
                    event.preventDefault(); 
                    
                    // 2. Show the fake success alert!
                    appendAlert('<strong>Order Placed Successfully!</strong> Thank you for your purchase.', 'success');
                    
                    // 3. Scroll to the top to see the alert
                    window.scrollTo(0, 0);
                    
                    // In a real application, you would remove event.preventDefault()
                    // and let the form submit to your server.
                });
            }
        });
    </script>
</body>
</html>